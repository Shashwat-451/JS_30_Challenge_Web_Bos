<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://fav.farm/âœ…" />
</head>
<body>


  <div class="keys">
    <div data-key="65" class="key">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
  </div>

  <audio data-key="65" src="./sounds/01 - JavaScript Drum Kit_sounds_boom.wav"></audio>
  <audio data-key="83" src="./sounds/01 - JavaScript Drum Kit_sounds_clap.wav"></audio>
  <audio data-key="68" src="./sounds/01 - JavaScript Drum Kit_sounds_hihat.wav"></audio>
  <audio data-key="70" src="./sounds/01 - JavaScript Drum Kit_sounds_kick.wav"></audio>
  <audio data-key="71" src="./sounds/01 - JavaScript Drum Kit_sounds_openhat.wav"></audio>
  <audio data-key="72" src="./sounds/01 - JavaScript Drum Kit_sounds_ride.wav"></audio>
  <audio data-key="74" src="./sounds/01 - JavaScript Drum Kit_sounds_snare.wav"></audio>
  <audio data-key="75" src="./sounds/01 - JavaScript Drum Kit_sounds_tink.wav"></audio>
  <audio data-key="76" src="./sounds/01 - JavaScript Drum Kit_sounds_tom.wav"></audio>

<script>
  function removeTransition(e) {
    // The purpose of this conditional statement is to check if the "transitionend" event occurred due to the completion of a CSS transition on the "transform" property of the element. If the condition is not met (i.e., the event was not triggered by the 
    //"transform" property), the function will immediately return, and the rest of the code inside the removeTransition function will not be executed.
    if (e.propertyName !== 'transform') return;
    e.target.classList.remove('playing');
  }

  function playSound(e) {
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
    const key = document.querySelector(`div[data-key="${e.keyCode}"]`);
    if (!audio) return;

    key.classList.add('playing');
    audio.currentTime = 0;
    audio.play();
  }

  const keys = Array.from(document.querySelectorAll('.key'));
  keys.forEach(key => key.addEventListener('transitionend', removeTransition));
  window.addEventListener('keydown', playSound);
</script>


</body>
</html>



<!-- This code snippet performs the following actions:

1. `document.querySelectorAll('.key')`: This line selects all the HTML elements on the page that have a class of "key". The `querySelectorAll` method returns a NodeList, which is a collection of DOM elements that match the specified CSS selector.

2. `Array.from(...)`: The `Array.from` method is used to convert the NodeList obtained in the previous step into a regular JavaScript array. This conversion allows you to use array methods, such as `forEach`, on the NodeList.

3. `const keys = Array.from(document.querySelectorAll('.key'));`: This line combines the two previous steps, selecting all elements with the class "key" and converting them into an array, which is then stored in the `keys` variable.

4. `keys.forEach(...)`: This is a loop that iterates over each element in the `keys` array.

5. `key.addEventListener('transitionend', removeTransition)`: For each element with the class "key", it adds an event listener to the "transitionend" event. The second argument to `addEventListener` is a callback function (`removeTransition`), which will be executed when the "transitionend" event occurs on that element.

6. `removeTransition`: This is likely a custom function defined somewhere else in the code. It's the function that will be called when the "transitionend" event is triggered on any of the elements with the "key" class. The purpose of this function is to handle the removal of a transition effect applied to the element.

So, to summarize, the code selects all elements with the class "key" from the document, converts them into an array, and then adds a "transitionend" event listener to each element, so that when the CSS transition ends on any of those elements, the `removeTransition` function will be called to handle the necessary cleanup or actions related to the transition. -->


<!-- The forEach loop will run only once during the execution of this code, and it will add the "transitionend" event listeners to all the elements with the class "key" that were selected earlier. These listeners will be ready to respond whenever the "transitionend" event occurs on any of those elements. -->